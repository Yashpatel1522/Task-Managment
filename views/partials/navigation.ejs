<html>

<head>
  <link rel="stylesheet" href="/css/employee/employee.css">
  <link rel="stylesheet" href="/sweetalert2/sweetalert2.min.css">
  <script src="/sweetalert2/sweetalert2.min.js"></script>
</head>

<body>
  <div class="profilename position-relative">
    <div class="float-start">
      <h3 class="text-center m-3"></h3>
    </div>
    <div class="d-flex position-absolute end-0">
      <div class="bell">
        <i class="bi bi-bell" onclick="shownotification()"></i>
      </div>
      <div id="dropdown" class="dropdown-content">
        <a href="/admin/profiledata" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop"
          onclick="loadprofile()">Profile</a>
        <a href="/admin/changepassword">Change Password</a>
        <a onclick="logoutpopup()">Logout</a>
      </div>
      <%- include('../adminmodulo/profile.ejs') %>
    </div>
    <%- include('../adminmodule/profile.ejs') %>
  </div>
  </div>
  <script>
    function showDropdown() {
      document.getElementById("dropdown").classList.toggle("show");
    }

    function logoutpopup() {
      try {
        Swal.fire({
          title: "Are you sure?",
          text: "You Logout this page !",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, delete it!"
        }).then((result) => {
          if (result.isConfirmed) {
            Swal.fire({
              title: "Deleted!",
              text: "Your file has been deleted.",
              icon: "success"
            });
            window.location.href = '/login'
          }
        });
      } catch (error) {
        console.log(error);
      }
    }


    async function loadprofile() {
      let response = await fetch("/admin/profiledata").then((response) => { return response.json() }).then((data) => {
        profileData = data.result;
        renderProfileData(profileData)
      })
    }

    const renderProfileData = (profileData) => {
      console.log('this is ', profileData);
      let inputFields = document.querySelectorAll('.form-control')
      inputFields = Array.from(inputFields)
      console.log(inputFields);
    }
  </script>